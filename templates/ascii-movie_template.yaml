---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Secret
metadata:
  name: release-name-ascii-movie-ssh
  labels:
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.8.2
    helm.sh/chart: ascii-movie-0.15.2
stringData:
  ssh_host_ed25519_key: |
    -----BEGIN PRIVATE KEY-----
    MC4CAQAwBQYDK2VwBCIEIC0ru17N15yCgteqoKdtNAIO9qYzmaXSjpi4RazsxEBL
    -----END PRIVATE KEY-----
  ssh_host_rsa_key: |
    -----BEGIN RSA PRIVATE KEY-----
    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
    -----END RSA PRIVATE KEY-----
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: release-name-ascii-movie-api
  labels:
    app.kubernetes.io/service: release-name-ascii-movie-api
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.8.2
    helm.sh/chart: ascii-movie-0.15.2
  annotations:
spec:
  type: ClusterIP
  ports:
    - port: 1977
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: release-name-ascii-movie
  labels:
    app.kubernetes.io/service: release-name-ascii-movie
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.8.2
    helm.sh/chart: ascii-movie-0.15.2
  annotations:
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
    - port: 22
      targetPort: ssh
      protocol: TCP
      name: ssh
    - port: 23
      targetPort: telnet
      protocol: TCP
      name: telnet
  selector:
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: release-name-ascii-movie
  labels:
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.8.2
    helm.sh/chart: ascii-movie-0.15.2
spec:
  revisionHistoryLimit: 3
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: ascii-movie
      app.kubernetes.io/instance: release-name
  template:
    metadata:
      annotations:
        
        checksum/secrets: c0946295e4094e120cd116e1a04138ea8780410474d7f3095268584661c55e0a
      labels:
        app.kubernetes.io/name: ascii-movie
        app.kubernetes.io/instance: release-name
    spec:
      
      serviceAccountName: default
      automountServiceAccountToken: true
      securityContext:
        runAsNonRoot: true
      dnsPolicy: ClusterFirst
      enableServiceLinks: true
      containers:
        - name: release-name-ascii-movie
          image: ghcr.io/gabe565/ascii-movie:1.8.2
          imagePullPolicy: Always
          securityContext:
            readOnlyRootFilesystem: true
          env:
            - name: ASCII_MOVIE_API_ADDRESS
              value: :1977
            - name: ASCII_MOVIE_CONCURRENT_STREAMS
              value: "10"
            - name: ASCII_MOVIE_SSH_ADDRESS
              value: :22
            - name: ASCII_MOVIE_SSH_ENABLED
              value: "true"
            - name: ASCII_MOVIE_SSH_HOST_KEY
              value: /etc/ssh/ssh_host_rsa_key,/etc/ssh/ssh_host_ed25519_key
            - name: ASCII_MOVIE_TELNET_ADDRESS
              value: :23
            - name: ASCII_MOVIE_TELNET_ENABLED
              value: "true"
          ports:
            - name: http
              containerPort: 1977
              protocol: TCP
            - name: ssh
              containerPort: 22
              protocol: TCP
            - name: telnet
              containerPort: 23
              protocol: TCP
          volumeMounts:
            - name: ssh
              mountPath: /etc/ssh
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 30
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 5
            timeoutSeconds: 1
      volumes:
        - name: ssh
          secret:
            secretName: release-name-ascii-movie-ssh
